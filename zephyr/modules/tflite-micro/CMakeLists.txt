# Copyright (c) 2021 Intel Corporation
# Copyright 2022 Arm Limited and/or its affiliates <open-source-office@arm.com>
# SPDX-License-Identifier: Apache-2.0

if(CONFIG_TENSORFLOW_LITE_MICRO)

  set(TENSORFLOW_LITE_MICRO_DIR ${ZEPHYR_CURRENT_MODULE_DIR})

  zephyr_library()

  zephyr_include_directories(
    ${TENSORFLOW_LITE_MICRO_DIR}/.
  #  ${TENSORFLOW_LITE_MICRO_DIR}/third_party_static/gemmlowp
    #${TENSORFLOW_LITE_MICRO_DIR}/third_party_static/flatbuffers/include
    #${TENSORFLOW_LITE_MICRO_DIR}/third_party_static/ruy
  )



  zephyr_library_sources(
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/api/paddle_api.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/api/paddle_place.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/activation.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/affine_channel.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/anchor_generator.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/argmax.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/axpy.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/beam_search.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/box_coder.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/col_im_transform.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/concat.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1_depthwise_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1_direct_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1_direct_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1p01_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1p01_depthwise_fp32_relu.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s1px_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2_depthwise_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2_direct_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2_direct_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2p01_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2p01_depthwise_fp32_relu.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3s2px_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3_winograd_fp32_c4.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv3x3_winograd_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv5x5s1_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv5x5s1_depthwise_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv5x5s2_depthwise_fp32.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv5x5s2_depthwise_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv_impl.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/conv_winograd_3x3.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/decode_bboxes.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/dropout.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/elementwise.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/fill_bias_relu.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/funcs.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/gemm_prepacked_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/gemm_s8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/gemv_arm_int8.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/im2sequence.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/increment.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/interpolate.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/layout.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/lrn.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/lstm.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/negative.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/norm.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/packed_sgemm.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/packed_sgemm_c4.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/pad2d.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/pooling.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/power.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/prior_box.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/reduce_max.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/reduce_mean.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/reduce_prod.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/scale.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/sequence_expand.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/sequence_pool.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/sequence_softmax.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/sgemm.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/sgemv.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/shuffle_channel.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/slice.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/softmax.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/split.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/split_merge_lod_tenosr.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/stack.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/topk.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/type_trans.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/arm/math/yolo_box.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/backends/host/target_wrapper.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/context.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/device_info.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/kernel.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/api/light_api.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/memory.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/api/light_api_impl.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/op_lite.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/op_registry.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/program.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/scope.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/target_wrapper.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/tensor.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/types.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/type_system.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/core/variable.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/activation_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/affine_channel_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/argmax_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/assign_value_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/batch_norm_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/box_coder_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/calib_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/cast_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/concat_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_direct.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_depthwise.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_gemmlike.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_transpose_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/conv_winograd.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/density_prior_box_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/dropout_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/elementwise_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/expand_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/fc_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/fill_constant_batch_size_like_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/fill_constant_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/grid_sampler_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/instance_norm_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/interpolate_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/layout_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/matmul_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/mul_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/pad2d_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/pool_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/prior_box_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/range_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/reduce_mean_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/scale_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/shuffle_channel_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/slice_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/softmax_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/split_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/squeeze_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/stack_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/transpose_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/unsqueeze_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/arm/yolo_box_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/host/feed_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/host/fetch_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/host/multiclass_nms_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/kernels/host/reshape_compute.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/compatible_pb.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/model_parser.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/cpp/block_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/cpp/op_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/cpp/program_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/cpp/var_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/block_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/combined_params_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/naive_buffer.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/op_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/param_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/program_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/var_desc.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/model_parser/naive_buffer/proto/framework.nb.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/activation_ops.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/affine_channel_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/argmax_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/batch_norm_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/box_coder_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/calib_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/cast_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/concat_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/conv_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/density_prior_box_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/conv_transpose_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/dropout_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/elementwise_ops.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/expand_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fake_channel_wise_dequantize_max_abs.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fake_dequantize_max_abs.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fake_quantize_dequantize_moving_avg_max_abs.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fake_quantize_moving_avg_max_abs.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fake_quantize_range_abs_max.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fc_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/feed_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fetch_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fill_constant_batch_size_like_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fill_constant_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/flatten_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/fusion_elementwise_activation_ops.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/grid_sampler_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/instance_norm_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/interpolate_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/io_copy_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/layout_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/matmul_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/mul_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/multiclass_nms_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/op_params.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/pad2d_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/pool_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/prior_box_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/range_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/reduce_mean_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/relu_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/reshape_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/scale_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/search_fc_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/sequence_topk_avg_pooling_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/shuffle_channel_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/slice_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/softmax_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/split_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/squeeze_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/stack_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/subgraph_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/transpose_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/unsqueeze_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/operators/yolo_box_op.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/utils/any.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/utils/logging.cc
    ${TENSORFLOW_LITE_MICRO_DIR}/lite/utils/replace_stl/stream.cc
    #${TENSORFLOW_LITE_MICRO_DIR}/tensorflow/lite/kernels/a.cc
  )

endif()
